  
 <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Balance Financiero</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .sidebar { position: fixed; top: 0; left: 0; width: 250px; height: 100%; background: #343a40; color: #fff; padding-top: 20px; transition: left .3s ease; z-index:1000; }
    .sidebar.show { left: 0; }
    .sidebar a { color: #fff; padding: 10px 20px; display: block; text-decoration: none; }
    .sidebar a:hover { background: #495057; }
    .hamburger { display: none; position: absolute; top: 20px; left: 20px; font-size: 30px; color: #343a40; background: none; border: none; cursor: pointer; z-index:1100; }
    @media(max-width:767px) { .sidebar { left: -250px; } .hamburger { display: block; } }
    .content { margin-left: 260px; padding: 20px; }
    .panel { background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
    table tr { animation: fadeIn .5s ease forwards; }
    .total { margin-top:10px; font-weight:bold; }
  </style>
</head>
<body>
  <button class="hamburger" id="hamburgerMenu" aria-label="Mostrar men√∫">‚ò∞</button>
  <nav class="sidebar" id="sidebarNav">
    <h3 class="text-center text-white">ùêÄùêèùêè</h3>
    <a href="index.html" onclick="showBalancesSection()">INICIO</a>
    <a href="" onclick="showIncomeExpenseSection()">CONTROL DE MERCADER√çA</a>
  </nav>
  <main class="content">
    <div class="container">
      <!-- Ingresos -->
      <section class="panel" id="incomePanel">
        <h3>Registro de Ingresos</h3>
        <form id="incomeForm" class="form-row">
          <div class="form-group col-md-2"><input type="date" id="incomeDate" class="form-control" required></div>
          <div class="form-group col-md-2"><input type="text" id="incomeConcept" class="form-control" required placeholder="Concepto"></div>
          <div class="form-group col-md-2"><input type="text" id="incomeDocType" class="form-control" required placeholder="Tipo de Doc"></div>
          <div class="form-group col-md-2"><input type="text" id="incomeMethod" class="form-control" required placeholder="M√©todo de Pago"></div>
          <div class="form-group col-md-2"><input type="number" step="0.01" id="incomeAmount" class="form-control" required placeholder="Monto"></div>
          <div class="form-group col-md-2"><button type="submit" class="btn btn-success btn-block">Agregar</button></div>
        </form>
        <div id="totalIncome" class="total">Total Ingresos: $0</div>
        <table class="table table-sm mt-2"><thead><tr><th>Fecha</th><th>Concepto</th><th>Tipo Doc</th><th>M√©todo</th><th>Monto</th></tr></thead><tbody id="incomesList"></tbody></table>
      </section>
      <!-- Egresos -->
      <section class="panel" id="expensePanel">
        <h3>Registro de Egresos</h3>
        <form id="expenseForm" class="form-row">
          <div class="form-group col-md-3"><input type="date" id="expenseDate" class="form-control" required></div>
          <div class="form-group col-md-3"><input type="text" id="expenseConcept" class="form-control" required placeholder="Concepto"></div>
          <div class="form-group col-md-3"><input type="number" step="0.01" id="expenseAmount" class="form-control" required placeholder="Monto"></div>
          <div class="form-group col-md-3"><button type="submit" class="btn btn-danger btn-block">Agregar</button></div>
        </form>
        <div id="totalExpense" class="total">Total Egresos: $0</div>
        <table class="table table-sm mt-2"><thead><tr><th>Fecha</th><th>Concepto</th><th>Monto</th></tr></thead><tbody id="expensesList"></tbody></table>
      </section>
      <!-- Resumen -->
      <section class="panel">
        <h3>Resumen por Fecha</h3>
        <div class="form-row mb-2">
          <div class="col-md-3"><input type="date" id="searchDate" class="form-control"></div>
          <div class="col-auto"><button id="btnSearch" class="btn btn-primary">Buscar</button></div>
          <div class="col-auto"><button id="btnClear" class="btn btn-secondary">Limpiar</button></div>
        </div>
        <div class="mb-2"><span>Ingresos: </span><span id="summaryIncome">$0</span></div>
        <div class="mb-2"><span>Egresos: </span><span id="summaryExpense">$0</span></div>
        <div class="mb-2"><span>Saldo: </span><span id="summaryBalance">$0</span></div>
        <table class="table table-sm"><thead><tr><th>Fecha</th><th>Concepto</th><th>Tipo</th><th>Monto</th></tr></thead><tbody id="searchResults"></tbody></table>
      </section>
    </div>
  </main>
  <script>
    const sidebar = document.getElementById('sidebarNav');
    document.getElementById('hamburgerMenu').addEventListener('click', () => {
      sidebar.classList.toggle('show');
    });

    function showBalancesSection(){
      document.getElementById('incomePanel').scrollIntoView({behavior:'smooth'});
      sidebar.classList.remove('show');
    }
    function showIncomeExpenseSection(){
      document.getElementById('expensePanel').scrollIntoView({behavior:'smooth'});
      sidebar.classList.remove('show');
    }
    
    // Persistent arrays
    let incomes = JSON.parse(localStorage.getItem('incomes')) || [];
    let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
    const incomesList = document.getElementById('incomesList');
    const expensesList = document.getElementById('expensesList');
    const totalIncome = document.getElementById('totalIncome');
    const totalExpense = document.getElementById('totalExpense');
    const summaryIncome = document.getElementById('summaryIncome');
    const summaryExpense = document.getElementById('summaryExpense');
    const summaryBalance = document.getElementById('summaryBalance');
    const searchDate = document.getElementById('searchDate');
    const btnSearch = document.getElementById('btnSearch');
    const btnClear = document.getElementById('btnClear');

    function saveData() {
      localStorage.setItem('incomes', JSON.stringify(incomes));
      localStorage.setItem('expenses', JSON.stringify(expenses));
    }

    function renderLists() {
      incomesList.innerHTML = '';
      incomes.forEach(i => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i.date}</td><td>${i.concept}</td><td>${i.docType}</td><td>${i.method}</td><td>$${i.amount.toFixed(2)}</td>`;
        incomesList.appendChild(tr);
      });
      expensesList.innerHTML = '';
      expenses.forEach(e => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${e.date}</td><td>${e.concept}</td><td>$${e.amount.toFixed(2)}</td>`;
        expensesList.appendChild(tr);
      });
      updateTotals();
    }

    function updateTotals() {
      const ti = incomes.reduce((sum, i) => sum + i.amount, 0);
      const te = expenses.reduce((sum, e) => sum + e.amount, 0);
      totalIncome.textContent = `Total Ingresos: $${ti.toFixed(2)}`;
      totalExpense.textContent = `Total Egresos: $${te.toFixed(2)}`;
    }

    document.getElementById('incomeForm').addEventListener('submit', e => {
      e.preventDefault();
      const newIncome = {
        date: document.getElementById('incomeDate').value,
        concept: document.getElementById('incomeConcept').value,
        docType: document.getElementById('incomeDocType').value,
        method: document.getElementById('incomeMethod').value,
        amount: parseFloat(document.getElementById('incomeAmount').value)
      };
      incomes.push(newIncome);
      saveData(); renderLists(); e.target.reset();
    });

    document.getElementById('expenseForm').addEventListener('submit', e => {
      e.preventDefault();
      const newExpense = {
        date: document.getElementById('expenseDate').value,
        concept: document.getElementById('expenseConcept').value,
        amount: parseFloat(document.getElementById('expenseAmount').value)
      };
      expenses.push(newExpense);
      saveData(); renderLists(); e.target.reset();
    });

    function search() {
      const date = searchDate.value;
      const fi = incomes.filter(i => i.date === date);
      const fe = expenses.filter(e => e.date === date);
      const ti = fi.reduce((s,i) => s + i.amount, 0);
      const te = fe.reduce((s,e) => s + e.amount, 0);
      summaryIncome.textContent = `$${ti.toFixed(2)}`;
      summaryExpense.textContent = `$${te.toFixed(2)}`;
      summaryBalance.textContent = `$${(ti - te).toFixed(2)}`;
      const ct = document.getElementById('searchResults'); ct.innerHTML = '';
      if(!date) return;
      fi.forEach(i => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i.date}</td><td>${i.concept}</td><td>Ingreso</td><td>$${i.amount.toFixed(2)}</td>`;
        ct.appendChild(tr);
      });
      fe.forEach(e => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${e.date}</td><td>${e.concept}</td><td>Egreso</td><td>$${e.amount.toFixed(2)}</td>`;
        ct.appendChild(tr);
      });
    }

    btnSearch.addEventListener('click', search);
    btnClear.addEventListener('click', () => {
      searchDate.value = '';
      summaryIncome.textContent = `$0`;
      summaryExpense.textContent = `$0`;
      summaryBalance.textContent = `$0`;
      document.getElementById('searchResults').innerHTML = '';
    });

    // Inicializaci√≥n
    renderLists();
  </script>
</body>
</html>


